; ============================================================
; PlatformIO — Ruches Connectees ESP32-S3 Master / Slave
; Migration depuis POC_ATSAMD (SODAQ Explorer)
; ============================================================

[platformio]
default_envs = master

; ============================================================
; Parametres communs aux deux environnements
; ============================================================
[env]
platform = espressif32
framework = arduino
board = esp32-s3-devkitc-1
monitor_speed = 115200
lib_ldf_mode = deep+

; Libs partagees master + slave
lib_deps =
    adafruit/RTClib @ ^2.1.4

; ============================================================
; Environnement MASTER — ESP32-S3-DevKitC-1 N16R8
; WiFi + BLE + LoRaWAN + Serveur Web + OLED + Capteurs
; ============================================================
[env:master]
build_flags =
    -DIS_MASTER=1
    -DCORE_DEBUG_LEVEL=3

build_src_filter =
    -<*>
    +<common/**/*>
    +<master/**/*>

; Libs master = communes + specifiques master
; Les libs specifiques seront ajoutees au fur et a mesure
lib_deps =
    ${env.lib_deps}

; ============================================================
; Environnement SLAVE — ESP32-S3
; BLE + HX711 + OLED debug + DS3231
; ============================================================
[env:slave]
build_flags =
    -DIS_SLAVE=1
    -DCORE_DEBUG_LEVEL=3

build_src_filter =
    -<*>
    +<common/**/*>
    +<slave/**/*>

lib_deps =
    ${env.lib_deps}
